我对当前前端系统进行了全面的代码评估，发现了一些可能影响系统稳定性、性能和可维护性的关键问题（"硬伤"）。

### 🚨 严重问题 (Critical)
这些问题需要立即修复，否则会导致生产环境故障或安全隐患。

1.  **IP 地址与环境配置硬编码**
    *   **位置**: `src/api/client.ts`
    *   **问题**: 代码中硬编码了 `192.168.110.112` 这样的内网 IP，并试图通过 `window.location.hostname` 猜测后端地址。
    *   **后果**: 在不同网络环境、生产环境或团队成员机器上无法正常运行；CI/CD 部署将失败。
    *   **建议**: 严格遵循 "Config as Code" 原则，移除所有 IP 判断逻辑，仅依赖 `import.meta.env.VITE_API_BASE_URL` 环境变量。

2.  **依赖版本冲突**
    *   **位置**: `package.json`
    *   **问题**: `react-router-dom` 使用了 `^7.10.1`（尚未发布的版本号，可能是笔误或特定源），但类型定义 `@types/react-router-dom` 停留在 `^5.3.3`。
    *   **后果**: 类型检查完全失效，导致路由相关的代码在运行时可能崩溃，且开发时无类型提示。
    *   **建议**: 将 `react-router-dom` 降级到稳定的 `6.x` 版本，并匹配相应的 `@types`。

3.  **认证与 API 客户端的脆弱耦合**
    *   **位置**: `src/api/client.ts` 与 `src/contexts/TeamContext.tsx`
    *   **问题**: `TeamId` 和 `Token` 的状态同时存在于 `localStorage`、`apiClient` 类的私有属性、以及 React Context 中。
    *   **后果**: 极易导致状态不同步。例如，用户切换团队后，并发发出的请求可能仍携带旧的 `TeamId`，导致数据读写错误或权限拒绝。

### 🏗 架构问题 (Major)
这些问题会随着项目增长导致性能瓶颈和开发困难。

1.  **God Object 状态管理 (性能瓶颈)**
    *   **位置**: `src/App.tsx` (appReducer)
    *   **问题**: 使用单一的 `StoreContext` 和巨大的 `appReducer` 管理所有数据（项目、视频、UI状态、上传队列）。
    *   **后果**: **全量重渲染**。每当上传进度更新（`UPDATE_UPLOAD_PROGRESS`），整个应用（包括侧边栏、列表、详情页）都可能触发重渲染，导致界面卡顿。
    *   **建议**: 引入 **React Query** (TanStack Query) 管理服务端数据（替换手动 fetch 和 cache），将 `Context` 限制在纯 UI 状态（如弹窗开关）。

2.  **一次性全量数据加载**
    *   **位置**: `src/hooks/useApiData.ts` (推测) 和 `src/App.tsx`
    *   **问题**: 应用启动时似乎调用了 `loadAllData`，一次性拉取所有项目、视频和通知。
    *   **后果**: 随着数据量增加，首屏加载时间将呈线性甚至指数增长，最终导致页面无响应。
    *   **建议**: 实现分页加载和按需加载。

3.  **巨大的组件文件**
    *   **位置**: `src/App.tsx` (~600行), `src/types.ts` (所有类型堆积)
    *   **问题**: `App.tsx` 承担了路由分发、全局数据获取、Toast 管理、WebSocket 监听等过多职责。

### 🧹 代码质量与工程化 (Minor)
1.  **缺少 Lint 和格式化工具**: 项目中没有 `.eslintrc` 或 `prettier` 配置，代码风格难以统一。
2.  **缺少测试**: 没有任何自动化测试（Unit Test 或 E2E），重构风险极高。
3.  **Vite 配置简陋**: 缺少路径别名（Alias），导致出现 `../../components` 这种深层引用。

---

### 🚀 改进计划 (Refactoring Plan)

如果获得您的批准，我建议按以下顺序进行修复：

#### Phase 1: 止血 (修复硬伤)
1.  **修正依赖**: 降级 `react-router-dom` 至 v6，修复类型定义。
2.  **清理网络层**: 重构 `src/api/client.ts`，移除 IP 猜测逻辑，强制使用环境变量。
3.  **规范化配置**: 添加路径别名 (`@/`) 和基础的 ESLint 配置。

#### Phase 2: 架构优化 (提升性能)
1.  **引入 React Query**: 替换 `useApiData`，实现数据的缓存和自动验证。
2.  **拆分 Context**: 将 `AppState` 拆分为 `UIContext` (侧边栏、弹窗) 和 `UploadContext` (上传队列)，避免无关组件渲染。

是否需要我先执行 **Phase 1** 的修复工作？